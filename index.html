<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>4ourmedia Audio Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-gray-900 text-white min-h-screen p-4 flex flex-col items-center">

    <div class="w-full max-w-6xl mx-auto space-y-6">

        <!-- Header -->
        <header class="text-center py-4">
            <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-2 text-glow">
                <span class="text-white">4our</span><span class="text-blue-500">media</span>
            </h1>
            <p class="text-gray-400 text-sm md:text-base tracking-wide uppercase">Premium Audio Visualization</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-6">

            <!-- Left Panel: Controls -->
            <aside class="lg:col-span-3 space-y-4">

                <!-- Upload Panel -->
                <div class="glass-panel p-4 rounded-xl">
                    <h2 class="text-sm font-semibold uppercase text-gray-400 mb-3 tracking-wider">Assets</h2>
                    <div class="space-y-3">
                        <div class="relative group">
                            <label class="block text-xs text-gray-500 mb-1">Background Image</label>
                            <input type="file" id="imageUpload" accept="image/*"
                                class="glass-input w-full text-xs rounded p-2 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-blue-600 file:text-white hover:file:bg-blue-700">
                            <p id="imageFileName" class="text-xs text-blue-400 mt-1 truncate h-4"></p>
                        </div>
                        <div class="relative group">
                            <label class="block text-xs text-gray-500 mb-1">Audio File</label>
                            <input type="file" id="audioUpload" accept="audio/*"
                                class="glass-input w-full text-xs rounded p-2 cursor-pointer file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-blue-600 file:text-white hover:file:bg-blue-700">
                            <p id="audioFileName" class="text-xs text-blue-400 mt-1 truncate h-4"></p>
                        </div>
                    </div>
                </div>

                <!-- Visual Settings Panel -->
                <div class="glass-panel p-4 rounded-xl">
                    <h2 class="text-sm font-semibold uppercase text-gray-400 mb-3 tracking-wider">Visual Style</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Style</label>
                            <select id="barStyle" class="glass-input w-full p-2 rounded text-sm">
                                <option value="gradient">Gradient Bars</option>
                                <option value="solid">Solid Bars</option>
                                <option value="circle">Circular</option>
                                <option value="wave">Wave Form</option>
                                <option value="spectrum">Spectrum</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Theme</label>
                            <select id="colorTheme" class="glass-input w-full p-2 rounded text-sm">
                                <option value="default">4ourmedia (Default)</option>
                                <option value="neon">Neon Nights</option>
                                <option value="fire">Inferno</option>
                                <option value="ocean">Deep Ocean</option>
                                <option value="forest">Forest</option> // Added forest option
                                <option value="sunset">Sunset</option>
                                <option value="rainbow">Chroma Loop</option>
                            </select>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Sensitivity</span>
                                <span id="sensitivityValue">1.5</span>
                            </div>
                            <input type="range" id="sensitivity" min="0.5" max="3" step="0.1" value="1.5">
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Glow</span>
                                <span id="glowIntensityValue">0</span>
                            </div>
                            <input type="range" id="glowIntensity" min="0" max="30" step="2" value="0">
                        </div>
                    </div>
                </div>

            </aside>

            <!-- Center Panel: Canvas -->
            <section class="lg:col-span-6 flex flex-col gap-4">

                <!-- Monitor Frame -->
                <div class="monitor-frame">
                    <div class="monitor-screen">
                        <canvas id="visualizerCanvas" width="1280" height="720"></canvas>
                    </div>

                    <!-- Overlay Controls (Floating) -->
                    <div class="absolute top-4 right-4 flex space-x-2">
                        <div id="statusMessage"
                            class="px-3 py-1 bg-black/50 rounded-full text-xs text-yellow-500 backdrop-blur-md"></div>
                    </div>
                </div>

                <!-- Audio Player -->
                <audio id="audioPlayer" controls class="w-full glass-panel rounded-lg p-2"></audio>

                <!-- Action Bar -->
                <div class="glass-panel p-4 rounded-xl flex flex-wrap justify-center gap-4">
                    <button id="startBtn"
                        class="glass-btn px-8 py-3 rounded-lg font-bold text-white uppercase tracking-wider disabled:opacity-50"
                        disabled>
                        Record Clip
                    </button>
                    <button id="pauseBtn"
                        class="glass-btn bg-yellow-600 px-6 py-3 rounded-lg font-bold text-white hidden">
                        Pause
                    </button>
                    <button id="resumeBtn"
                        class="glass-btn bg-green-600 px-6 py-3 rounded-lg font-bold text-white hidden">
                        Resume
                    </button>
                    <button id="stopBtn" class="glass-btn bg-red-600 px-6 py-3 rounded-lg font-bold text-white hidden">
                        Stop
                    </button>
                </div>

                <!-- Progress -->
                <div id="progressContainer" class="hidden glass-panel p-4 rounded-xl">
                    <div class="flex justify-between text-xs text-gray-400 mb-1">
                        <span>Recording...</span>
                        <span id="recordingTime">00:00</span>
                    </div>
                    <div class="w-full bg-gray-800 rounded-full h-2 overflow-hidden">
                        <div id="progressBar" class="progress-bar h-full w-0"></div>
                    </div>
                    <div class="text-center text-xs text-gray-500 mt-1" id="progressText">0%</div>
                </div>

                <!-- Downloads -->
                <div id="downloadContainer" class="flex flex-col gap-2"></div>

            </section>

            <!-- Right Panel: Advanced & Overlays -->
            <aside class="lg:col-span-3 space-y-4">

                <!-- Advanced Visuals -->
                <div class="glass-panel p-4 rounded-xl">
                    <h2 class="text-sm font-semibold uppercase text-gray-400 mb-3 tracking-wider">Composition</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Position</label>
                            <select id="visualizerPosition" class="glass-input w-full p-2 rounded text-sm">
                                <option value="bottom">Bottom</option>
                                <option value="center">Center</option>
                                <option value="top">Top</option>
                            </select>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Bar Count</span>
                                <span id="barCountValue">64</span>
                            </div>
                            <input type="range" id="barCount" min="16" max="128" step="8" value="64">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Mirror</label>
                            <select id="mirrorMode" class="glass-input w-full p-2 rounded text-sm">
                                <option value="none">None</option>
                                <option value="horizontal">Horizontal (L-R)</option>
                                <option value="vertical">Vertical (U-D)</option>
                            </select>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Speed</span>
                                <span id="animationSpeedValue">1.0</span>x
                            </div>
                        </div>
                        <input type="range" id="animationSpeed" min="0.2" max="3" step="0.1" value="1.0">
                    </div>
                    <div>
                        <div class="flex justify-between text-xs text-gray-500 mb-1">
                            <span>Bass Shake</span>
                            <span id="bassShakeValue">0</span>
                        </div>
                        <input type="range" id="bassShake" min="0" max="100" step="5" value="0">
                    </div>
                </div>
    </div>

    <!-- Export Settings -->
    <div class="glass-panel p-4 rounded-xl">
        <h2 class="text-sm font-semibold uppercase text-gray-400 mb-3 tracking-wider">Export</h2>
        <div class="grid grid-cols-2 gap-2">
            <div>
                <label class="block text-xs text-gray-500 mb-1">Quality</label>
                <select id="videoQuality" class="glass-input w-full p-1 rounded text-xs">
                    <option value="720p">720p</option>
                    <option value="1080p">1080p</option>
                    <option value="4k">4K</option>
                </select>
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1">FPS</label>
                <select id="frameRate" class="glass-input w-full p-1 rounded text-xs">
                    <option value="24">24</option>
                    <option value="30" selected>30</option>
                    <option value="60">60</option>
                </select>
            </div>
        </div>
        <div class="mt-2">
            <label class="block text-xs text-gray-500 mb-1">Format</label>
            <select id="exportFormat" class="glass-input w-full p-1 rounded text-xs">
                <option value="webm">WebM (Better)</option>
                <option value="mp4">MP4</option>
            </select>
        </div>
    </div>

    <!-- Overlays -->
    <div class="glass-panel p-4 rounded-xl">
        <h2 class="text-sm font-semibold uppercase text-gray-400 mb-3 tracking-wider">Overlays & Text</h2>

        <!-- Text 1 Info -->
        <div class="mb-4 pb-4 border-b border-white/10">
            <label class="block text-xs text-blue-400 mb-1 font-bold">Main Text</label>
            <input type="text" id="text1Content" placeholder="Enter Title..."
                class="glass-input w-full p-2 rounded text-sm mb-2">
            <div class="flex gap-2">
                <input type="color" id="text1Color" value="#ffffff"
                    class="h-6 w-6 rounded bg-transparent cursor-pointer border-0">
                <input type="range" id="text1Size" min="12" max="100" value="32" class="flex-1">
            </div>
            <!-- Hidden inputs for full compat with JS logic -->
            <select id="text1Font" class="hidden">
                <option value="Inter">Inter</option>
            </select>
            <select id="text1Style" class="hidden">
                <option value="bold">Bold</option>
            </select>
            <input type="checkbox" id="text1Shadow" checked class="hidden">
        </div>

        <!-- Text 2 Info -->
        <div class="mb-4 pb-4 border-b border-white/10">
            <label class="block text-xs text-blue-400 mb-1 font-bold">Sub Text</label>
            <input type="text" id="text2Content" placeholder="Enter Artist..."
                class="glass-input w-full p-2 rounded text-sm mb-2">
            <div class="flex gap-2">
                <input type="color" id="text2Color" value="#cccccc"
                    class="h-6 w-6 rounded bg-transparent cursor-pointer border-0">
                <input type="range" id="text2Size" min="12" max="72" value="24" class="flex-1">
            </div>
            <!-- Hidden inputs -->
            <select id="text2Font" class="hidden">
                <option value="Inter">Inter</option>
            </select>
            <select id="text2Style" class="hidden">
                <option value="normal">Normal</option>
            </select>
            <input type="checkbox" id="text2Shadow" checked class="hidden">
        </div>

        <!-- Image Overlays -->
        <div class="space-y-2">
            <label class="block text-xs text-gray-500 mb-1 font-bold">Background (Image / Video)</label>
            <div class="relative group">
                <label for="imageUpload"
                    class="glass-btn flex items-center justify-center w-full p-3 rounded-lg cursor-pointer hover:bg-white/10 transition">
                    <span id="imageFileName" class="text-xs truncate">Upload File...</span>
                </label>
                <input type="file" id="imageUpload" class="hidden" accept="image/*,video/mp4,video/webm,.mp4,.webm">
            </div>
            <label class="block text-xs text-blue-400 mb-1 font-bold">Logo / Stickers</label>
            <!-- Loop for 5 overlays -->
            <div class="grid grid-cols-5 gap-1">
                <!-- 1 -->
                <div class="relative group">
                    <label for="overlay1Upload"
                        class="block w-8 h-8 rounded bg-white/10 hover:bg-white/20 cursor-pointer flex items-center justify-center text-xs">+1</label>
                    <input type="file" id="overlay1Upload" class="hidden" accept="image/*">
                    <button id="overlay1Remove" class="hidden text-red-500 absolute -top-1 -right-1 text-xs">x</button>
                    <!-- Size Control (Visible) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-32 hidden group-hover:flex flex-col z-50">
                        <div
                            class="flex flex-col bg-black/90 p-2 rounded-lg border border-white/10 shadow-xl backdrop-blur-sm">
                            <label class="text-[8px] text-gray-400">Size</label>
                            <input type="range" id="overlay1Size" value="50" min="10" max="200" class="w-full h-1">
                            <label class="text-[8px] text-gray-400 mt-1">Opacity</label>
                            <input type="range" id="overlay1Opacity" value="100" min="0" max="100" class="w-full h-1">
                        </div>
                    </div>
                    <span id="overlay1SizeValue" class="hidden">50</span>
                    <span id="overlay1OpacityValue" class="hidden">100</span>
                    <span id="overlay1Name" class="hidden"></span>
                </div>
                <!-- 2 -->
                <div class="relative group">
                    <label for="overlay2Upload"
                        class="block w-8 h-8 rounded bg-white/10 hover:bg-white/20 cursor-pointer flex items-center justify-center text-xs">+2</label>
                    <input type="file" id="overlay2Upload" class="hidden" accept="image/*">
                    <button id="overlay2Remove" class="hidden text-red-500 absolute -top-1 -right-1 text-xs">x</button>
                    <!-- Size Control (Visible on Hover) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-32 hidden group-hover:flex flex-col z-50">
                        <div
                            class="flex flex-col bg-black/90 p-2 rounded-lg border border-white/10 shadow-xl backdrop-blur-sm">
                            <label class="text-[8px] text-gray-400">Size</label>
                            <input type="range" id="overlay2Size" value="50" min="10" max="200" class="w-full h-1">
                            <label class="text-[8px] text-gray-400 mt-1">Opacity</label>
                            <input type="range" id="overlay2Opacity" value="100" min="0" max="100" class="w-full h-1">
                        </div>
                    </div>
                    <span id="overlay2SizeValue" class="hidden">50</span>
                    <span id="overlay2OpacityValue" class="hidden">100</span>
                    <span id="overlay2Name" class="hidden"></span>
                </div>
                <!-- 3 -->
                <div class="relative group">
                    <label for="overlay3Upload"
                        class="block w-8 h-8 rounded bg-white/10 hover:bg-white/20 cursor-pointer flex items-center justify-center text-xs">+3</label>
                    <input type="file" id="overlay3Upload" class="hidden" accept="image/*">
                    <button id="overlay3Remove" class="hidden text-red-500 absolute -top-1 -right-1 text-xs">x</button>
                    <!-- Size Control (Visible on Hover) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-32 hidden group-hover:flex flex-col z-50">
                        <div
                            class="flex flex-col bg-black/90 p-2 rounded-lg border border-white/10 shadow-xl backdrop-blur-sm">
                            <label class="text-[8px] text-gray-400">Size</label>
                            <input type="range" id="overlay3Size" value="50" min="10" max="200" class="w-full h-1">
                            <label class="text-[8px] text-gray-400 mt-1">Opacity</label>
                            <input type="range" id="overlay3Opacity" value="100" min="0" max="100" class="w-full h-1">
                        </div>
                    </div>
                    <span id="overlay3SizeValue" class="hidden">50</span>
                    <span id="overlay3OpacityValue" class="hidden">100</span>
                    <span id="overlay3Name" class="hidden"></span>
                </div>
                <!-- 4 -->
                <div class="relative group">
                    <label for="overlay4Upload"
                        class="block w-8 h-8 rounded bg-white/10 hover:bg-white/20 cursor-pointer flex items-center justify-center text-xs">+4</label>
                    <input type="file" id="overlay4Upload" class="hidden" accept="image/*">
                    <button id="overlay4Remove" class="hidden text-red-500 absolute -top-1 -right-1 text-xs">x</button>
                    <!-- Size Control (Visible on Hover) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-32 hidden group-hover:flex flex-col z-50">
                        <div
                            class="flex flex-col bg-black/90 p-2 rounded-lg border border-white/10 shadow-xl backdrop-blur-sm">
                            <label class="text-[8px] text-gray-400">Size</label>
                            <input type="range" id="overlay4Size" value="50" min="10" max="200" class="w-full h-1">
                            <label class="text-[8px] text-gray-400 mt-1">Opacity</label>
                            <input type="range" id="overlay4Opacity" value="100" min="0" max="100" class="w-full h-1">
                        </div>
                    </div>
                    <span id="overlay4SizeValue" class="hidden">50</span>
                    <span id="overlay4OpacityValue" class="hidden">100</span>
                    <span id="overlay4Name" class="hidden"></span>
                </div>
                <!-- 5 -->
                <div class="relative group">
                    <label for="overlay5Upload"
                        class="block w-8 h-8 rounded bg-white/10 hover:bg-white/20 cursor-pointer flex items-center justify-center text-xs">+5</label>
                    <input type="file" id="overlay5Upload" class="hidden" accept="image/*">
                    <button id="overlay5Remove" class="hidden text-red-500 absolute -top-1 -right-1 text-xs">x</button>
                    <!-- Size Control (Visible on Hover) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-32 hidden group-hover:flex flex-col z-50">
                        <div
                            class="flex flex-col bg-black/90 p-2 rounded-lg border border-white/10 shadow-xl backdrop-blur-sm">
                            <label class="text-[8px] text-gray-400">Size</label>
                            <input type="range" id="overlay5Size" value="50" min="10" max="200" class="w-full h-1">
                            <label class="text-[8px] text-gray-400 mt-1">Opacity</label>
                            <input type="range" id="overlay5Opacity" value="100" min="0" max="100" class="w-full h-1">
                        </div>
                    </div>
                    <span id="overlay5SizeValue" class="hidden">50</span>
                    <span id="overlay5OpacityValue" class="hidden">100</span>
                    <span id="overlay5Name" class="hidden"></span>
                </div>
            </div>
            <p class="text-[10px] text-gray-500 mt-2">Click to upload. Drag on screen to move.</p>
        </div>

    </div>

    </aside>

    </main>

    <footer class="text-center text-gray-600 text-xs py-4">
        &copy; 2025 4ourmedia. All rights reserved.
    </footer>

    </div>

    <script src="js/visualizer.js"></script>
    <script src="js/app.js"></script>
</body>

</html>